!function(o){o(document).ready(function(){let e="";o("#new-quote-button").on("click",function(t){t.preventDefault(),console.log("click"),o(".thequote").remove(),o(".quotetitle").remove(),e=document.URL,o.ajax({method:"GET",url:qod_vars.rest_url+"wp/v2/posts?filter[orderby]=rand&filter[posts_per_page]=1"}).done(function(e){console.log(e);const t=e[0];o(".entry-content").append(`<div class="thequote">\n            ${t.content.rendered}\n            </div>`),o(".entry-meta").append(`<h2 class="quotetitle">-  ${t.title.rendered} \n            </h2>`),0==t._qod_quote_source?console.log("nosource"):(o(".quotetitle").append(`, <a href="${t._qod_quote_source_url}">${t._qod_quote_source}</a>`),console.log(t._qod_quote_source),console.log(t._qod_quote_source_url)),history.pushState(null,null,qod_vars.home_url+"/"+t.slug)}).fail(function(o){console.log(o)})}),o(window).on("popstate",function(){window.location.replace(e)}),o("#quote-submission-form").on("submit",function(e){e.preventDefault(),function(){const e=o("#quote-content").val(),t=o("#quote-author").val(),n=o("#quote-source").val(),u=o("#quote-source-url").val();o.ajax({method:"POST",url:qod_vars.rest_url+"wp/v2/posts",data:{title:t,content:e,qod_quote_source:n,qod_quote_sourceurl:u},beforeSend:function(o){o.setRequestHeader("X-WP-Nonce",qod_vars.nonce)}}).done(function(e){console.log(e),o(".quote-submission-wraper").slideUp(1700),o(".quote-submission").append('<p class="submission-msg">Your form has been submitted!</p>')}).fail(function(o){console.log(o),alert("Form did not submit, missing some fields?")})}()})})}(jQuery);